(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{49:function(e,t,s){},50:function(e,t,s){},79:function(e,t,s){},83:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),r=s(21),a=s.n(r),o=(s(49),s(50),s(51),s(7)),i=s(8),l=s(0),d=function(){return Object(l.jsx)("div",{style:{height:"100vh"},className:"container valign-wrapper",children:Object(l.jsx)("div",{className:"row",children:Object(l.jsxs)("div",{className:"col s12 center-align valign-wrapper",children:[Object(l.jsx)("div",{className:"col s6",children:Object(l.jsx)("img",{src:"/login_img.png",width:"300",alt:"logo"})}),Object(l.jsx)("div",{className:"col s6",children:Object(l.jsx)("div",{className:"btns",children:Object(l.jsxs)("div",{children:[Object(l.jsx)(i.b,{to:"/register",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px",marginRight:"15px"},className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Register"}),Object(l.jsx)(i.b,{to:"/login",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable pink accent-3",children:"Log In"})]})})})]})})})},j=s(16),u=s(2),b=s(4),m=s(3),h=s(23),p=s.n(h),O="GET_ERRORS",g="ADD_PRODUCT_SUCCESS",x="ADD_PRODUCT_FAILURE",f="IS_LOADING",v=function(e){return{type:g,payload:e}},N=function(e){return{type:x,payload:{error:e}}},y=function(e){return{type:f,payload:e}},_=function(){return function(e){e(y(!0)),fetch("/api/post/allposts").then((function(e){if(e.ok)return e.json();throw new Error("Failed to load")})).then((function(t){e(y(!1)),e(v(t))})).catch((function(t){e(N(t.message))}))}},w=s(18),C=s.n(w),S=Object(m.b)((function(e){return{isLogged:e.isLogged,errors:e.errors}}),{registerUser:function(e,t){return function(s){p.a.post("/api/users/register",e).then((function(e){return t.push("/login")})).catch((function(e){return s({type:O,payload:e.response.data})}))}}})(Object(o.h)((function(e){var t=Object(n.useState)({name:"",username:"",email:"",password:"",password2:""}),s=Object(b.a)(t,2),c=s[0],r=s[1];Object(n.useEffect)((function(){e.isLogged&&e.history.push("/dashboard")}),[e.isLogged,e.history]);var a=function(e){r(Object(u.a)(Object(u.a)({},c),{},Object(j.a)({},e.target.id,e.target.value)))};return Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("div",{className:"row",children:Object(l.jsxs)("div",{className:"col s8 offset-s2",children:[Object(l.jsx)("div",{children:Object(l.jsx)("img",{src:"/logo_header.png",alt:"logo"})}),Object(l.jsxs)(i.b,{to:"/",className:"btn-flat waves-effect",children:[Object(l.jsx)("i",{className:"material-icons left",children:"keyboard_backspace"})," Back to home"]}),Object(l.jsxs)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:[Object(l.jsxs)("h4",{children:[Object(l.jsx)("strong",{children:"Register"})," below"]}),Object(l.jsxs)("p",{className:"grey-text text-darken-1",children:["Already have an account? ",Object(l.jsx)(i.b,{to:"/login",children:"Log in"})]})]}),Object(l.jsxs)("form",{noValidate:!0,onSubmit:function(t){t.preventDefault();var s=Object(u.a)({},c);e.registerUser(s,e.history)},children:[Object(l.jsxs)("div",{className:"input-field col s12",children:[Object(l.jsx)("input",{onChange:a,value:c.name,error:e.errors.name,id:"name",type:"text",className:C()("",{invalid:e.errors.name})}),Object(l.jsx)("label",{htmlFor:"name",children:"Name"}),Object(l.jsx)("span",{className:"red-text",children:e.errors.name})]}),Object(l.jsxs)("div",{className:"input-field col s12",children:[Object(l.jsx)("input",{onChange:a,value:c.username,error:e.errors.username,id:"username",type:"text",className:C()("",{invalid:e.errors.username})}),Object(l.jsx)("label",{htmlFor:"username",children:"Username"}),Object(l.jsx)("span",{className:"red-text",children:e.errors.username})]}),Object(l.jsxs)("div",{className:"input-field col s12",children:[Object(l.jsx)("input",{onChange:a,value:c.email,error:e.errors.email,id:"email",type:"email",className:C()("",{invalid:e.errors.email})}),Object(l.jsx)("label",{htmlFor:"email",children:"Email"}),Object(l.jsx)("span",{className:"red-text",children:e.errors.email})]}),Object(l.jsxs)("div",{className:"input-field col s12",children:[Object(l.jsx)("input",{onChange:a,value:c.password,error:e.errors.password,id:"password",type:"password",className:C()("",{invalid:e.errors.password})}),Object(l.jsx)("label",{htmlFor:"password",children:"Password"}),Object(l.jsx)("span",{className:"red-text",children:e.errors.password})]}),Object(l.jsxs)("div",{className:"input-field col s12",children:[Object(l.jsx)("input",{onChange:a,value:c.password2,error:e.errors.password2,id:"password2",type:"password",className:C()("",{invalid:e.errors.password2})}),Object(l.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(l.jsx)("span",{className:"red-text",children:e.errors.password2})]}),Object(l.jsx)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:Object(l.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Sign up"})})]})]})})})}))),k="SET_LOGGED_TRUE",U="SET_LOGGED_FALSE",E="SET_LOGGEDUSER",D="UNSET_LOGGEDUSER",L="UPDATE_DATA",T=function(){return{type:k}},I=function(){return{type:U}},P=function(e){return{type:E,payload:e}},F=function(){return{type:D}},R=function(e){var t=Object(o.f)(),s=Object(m.c)(),c=Object(m.d)((function(e){return e.isLogged})),r=Object(n.useState)({email:"",password:""}),a=Object(b.a)(r,2),d=a[0],h=a[1],p=d.email,O=d.password,g=function(e){h(Object(u.a)(Object(u.a)({},d),{},Object(j.a)({},e.target.id,e.target.value)))};return Object(n.useEffect)((function(){c&&t.push("/")}),[c]),Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("div",{style:{marginTop:"4rem"},className:"row",children:Object(l.jsxs)("div",{className:"col s8 offset-s2",children:[Object(l.jsx)("div",{children:Object(l.jsx)("img",{src:"/logo_header.png",alt:"logo"})}),Object(l.jsxs)(i.b,{to:"/",className:"btn-flat waves-effect",children:[Object(l.jsx)("i",{className:"material-icons left",children:"keyboard_backspace"})," Back to home"]}),Object(l.jsxs)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:[Object(l.jsxs)("h4",{children:[Object(l.jsx)("b",{children:"Login"})," below"]}),Object(l.jsxs)("p",{className:"grey-text text-darken-1",children:["Don't have an account? ",Object(l.jsx)(i.b,{to:"/register",children:"Register"})]})]}),Object(l.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),fetch("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p,password:O})}).then((function(e){return e.json()})).then((function(e){h({email:"",password:""}),localStorage.setItem("jwt",e.token),s(P(e.user)),s(T()),t.push("/")})).catch((function(e){return console.log(e)}))},children:[Object(l.jsxs)("div",{className:"input-field col s12",children:[Object(l.jsx)("input",{onChange:g,value:d.email,id:"email",type:"email"}),Object(l.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(l.jsxs)("div",{className:"input-field col s12",children:[Object(l.jsx)("input",{onChange:g,value:d.password,id:"password",type:"password"}),Object(l.jsx)("label",{htmlFor:"password",children:"Password"})]}),Object(l.jsx)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:Object(l.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Login"})})]})]})})})},A=(s(79),function(e){var t=Object(m.d)((function(e){return e.loggedUser})).username,s=Object(o.f)(),n=Object(m.c)();return Object(l.jsxs)("div",{className:"navwrapper",children:[Object(l.jsx)(i.c,{to:"/",children:Object(l.jsx)("img",{src:"/logo_header.png",alt:"logo"})}),Object(l.jsxs)("ul",{className:"nav-menu",children:[Object(l.jsx)("li",{className:"nav-menu__item",children:Object(l.jsxs)("a",{className:"nav-menu__item-item1",href:"/user/".concat(t),children:[Object(l.jsx)("div",{className:"user-name",children:t}),Object(l.jsx)("div",{children:Object(l.jsx)("i",{className:"material-icons",children:"person_outline"})})]})}),Object(l.jsx)("li",{children:Object(l.jsx)("span",{className:"nav-menu__item",onClick:function(e){e.preventDefault(),localStorage.clear(),n(I()),n(F()),s.push("/login")},children:Object(l.jsx)("i",{className:"material-icons",children:"exit_to_app"})})})]})]})}),G=function(){return Object(l.jsx)("div",{className:"container center-align",children:"Copyright 2021. Instagram"})},B=s(9),M=function(e){var t=e.sizePic,s=e.alt,c=e.userName,r=e.photoUser,a=e.unFollowUsers,o=e.handleFollow,d=e.data,j=Object(n.useState)(!1),u=Object(b.a)(j,2),m=u[0],h=u[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(i.b,{to:"/user/".concat(c),className:t?"user min":"user",children:[Object(l.jsx)("img",{src:r||"https://res.cloudinary.com/dn1sljbzi/image/upload/v1626209088/profile-pic_r6huys.jpg",alt:s}),Object(l.jsx)("div",{children:c})]}),a&&Object(l.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},className:"btn blue accent-3",onClick:function(){o(d.username,d._id),h(!m)},children:m?"unFollow":"Follow"})]})},z=function(e){var t=Object(m.d)((function(e){return{loggedUser:e.loggedUser}})).loggedUser,s=Object(n.useState)(!1),c=Object(b.a)(s,2),r=(c[0],c[1]),a=Object(n.useState)(!1),o=Object(b.a)(a,2),i=(o[0],o[1]),d=t.username,j=t.userimg,u=Object(n.useState)([]),h=Object(b.a)(u,2),p=h[0],O=h[1],g=function(e,t){fetch("/api/users/user/".concat(e,"/follow"),{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){e.error||r((function(e){return!e}))})).catch((function(e){return console.log(e)})),O([].concat(Object(B.a)(p),[t])),i(!1)};return Object(l.jsxs)("div",{className:"users",children:[Object(l.jsx)("div",{className:"users__current",children:Object(l.jsx)(M,{photoUser:j,alt:"man",userName:d})}),Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"users__block",children:[Object(l.jsx)("div",{children:"Following:"}),e.allUsersData.users.map((function(e){return Object(l.jsx)("div",{children:!e._id.includes(t._id)&&t.following.includes(e._id)&&Object(l.jsx)(M,{userName:e.username,altName:e.username,photoUser:e.userimg})},e._id)}))]})," ",Object(l.jsxs)("div",{className:"users__block",children:[Object(l.jsx)("div",{children:"Recommendations:"}),e.allUsersData.users.length===t.following.length?Object(l.jsx)("h5",{children:"No recommendations"}):"",e.allUsersData.users.map((function(e){return Object(l.jsxs)("div",{className:"users__blockIcon",children:[!e._id.includes(t._id)&&!t.following.includes(e._id)&&Object(l.jsx)(M,{userName:e.username,altName:e.username,photoUser:e.userimg,handleFollow:g,data:e,unFollowUsers:!e._id.includes(t._id)&&!t.following.includes(e._id)})," "]},e._id)}))]})]})]})},J="GET_PHOTOS",X="GET_CURRENT_PAGE",H="SET_FETCHING",V="GET_TOTAL_COUNT",q=function(e){return{type:J,payload:e}},K=function(e){return{type:H,payload:e}},Q=s(15);var W=function(e){var t=e.className,s=e.backgroundColor,n=e.text,c=e.onClick;return Object(l.jsx)("button",{className:t,style:{background:s},onClick:c,children:n})},Y=function(e){var t=Object(n.useState)(!1),s=Object(b.a)(t,2),c=s[0],r=s[1],a=e.descr.split(" "),o=c?a.length:5;return Object(l.jsxs)("p",{className:"post__descr",children:[a.splice(0,o).map((function(e){return" ".concat(e)})),0===a.length?"":Object(l.jsx)(W,{text:"... show More",onClick:function(){r(!0)}})," "]})},Z=s(28),$=s.n(Z),ee=s(43),te=function(e){var t=Object(o.f)(),s=e.comment,n=e.user,c=n?n[0].username:s.by.username;return Object(l.jsx)("div",{className:"comment",children:Object(l.jsxs)("div",{className:"comment__wrapper",children:[Object(l.jsx)("a",{href:"/user/".concat(c),children:Object(l.jsx)("img",{src:(n?n[0].userimg:s.by.userimg)||"https://res.cloudinary.com/dn1sljbzi/image/upload/v1626209088/profile-pic_r6huys.jpg",alt:"".concat(c,"'s profile")})}),Object(l.jsx)("a",{href:"/user/".concat(c),children:Object(l.jsx)("p",{onClick:function(){return t.push("/user/".concat(c))},className:"comment__username",children:c})}),Object(l.jsx)("p",{className:"comment__body",children:s.comment})]})})},se=function(e){var t=e.comments,s=e.setChangeModal,c=e.setComments,r=e.postID,a=Object(n.useState)(!1),o=Object(b.a)(a,2),i=o[0],d=o[1],j=Object(m.d)((function(e){return{allUsersData:e.allUsers.allUsersData}})).allUsersData,u=t,h=i?u:[u[u.length-1]],p=Object(m.d)((function(e){return e.loggedUser})),O=Object(n.useState)(""),g=Object(b.a)(O,2),x=g[0],f=g[1],v=function(){var t=Object(ee.a)($.a.mark((function t(n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault();try{fetch("/api/post/postcomment",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:r,postedBy:p._id,comment:x})}).then((function(t){t.json(),c([].concat(Object(B.a)(e.comments),[{_id:r,by:p,comment:x}])),s&&s(!0)})).then((function(e){f(""),s&&s(!1)}))}catch(a){}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"wrapperComments",children:[Object(l.jsx)("h5",{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),1!==u.length&&e.comments&&Object(l.jsxs)("button",{className:"wrapperComments__button",onClick:function(){d(!i)},children:[i?"\u0421\u043a\u0440\u044b\u0442\u044c \u0432\u0441\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438: ",!i&&e.comments&&u.length]}),h.map((function(e){return e.by.hasOwnProperty("username")?Object(l.jsx)("div",{children:Object(l.jsx)(te,{comment:e})},e._id):Object(l.jsx)("div",{children:Object(l.jsx)(te,{comment:e,user:j.users.filter((function(t){return t._id===e.by}))})},e._id)})),Object(l.jsx)("div",{className:"createComment-form",children:Object(l.jsxs)("form",{className:"comment-form",onSubmit:v,children:[Object(l.jsx)("input",{onChange:function(e){f(e.target.value)},name:"comment",required:!0,id:"comment__field",placeholder:"Add Comment",value:x}),Object(l.jsx)("button",{type:"submit",children:">"})]})})]})},ne=function(e){var t=Object(m.d)((function(e){return e.loggedUser})),s=e.userName,c=e.photoUser,r=e.description,a=e.src,o=e.alt,i=e.id,d=e.comments,j=e.likes,u=Object(n.useState)(d),h=Object(b.a)(u,2),p=h[0],O=h[1],g=Object(n.useState)(j),x=Object(b.a)(g,2),f=x[0],v=x[1],N=f,y=function(){fetch("/api/post/like",{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:i})}).then((function(e){e.json(),N.find((function(e){return e.username===t.username}))?v(Object(B.a)(f.filter((function(e){return e.username!==t.username})))):v([].concat(Object(B.a)(f),[{_id:t._id,username:t.username}]))})).catch((function(e){return console.log(e)}))};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(M,{photoUser:c,alt:s,userName:s,sizePic:!0}),Object(l.jsx)("img",{onDoubleClick:y,src:a,alt:o}),Object(l.jsxs)("div",{className:"icons",children:[Object(l.jsx)("div",{className:"svgContainer",children:void 0===N.find((function(e){return e.username===t.username}))?Object(l.jsx)(Q.a,{onClick:y,src:"/img/Posts/iconmonstr-heart-thin.svg",style:{padding:"8px"}}):Object(l.jsx)(Q.a,{onClick:y,src:"/img/Posts/iconmonstr-favorite-3.svg",style:{padding:"8px"}})}),Object(l.jsx)(Q.a,{src:"/img/Posts/bookmark-white.svg",style:{padding:"8px"}})]}),Object(l.jsxs)("div",{className:"likes",children:[Object(l.jsx)("strong",{children:"Likes:"})," ",N.length]}),Object(l.jsx)(Y,{descr:r}),Object(l.jsx)(se,{comments:p,setComments:O,postID:i})]})},ce=function(){var e=Object(m.d)((function(e){return{photos:e.dashboard.photos,currentPage:e.dashboard.currentPage,fetching:e.dashboard.fetching,totalCount:e.dashboard.totalCount}})),t=e.photos,s=e.currentPage,c=e.fetching,r=e.totalCount,a=Object(m.c)();Object(n.useEffect)((function(){c&&t.length!==r.length&&p.a.get("/api/post/allposts").then((function(e){var n,c,r;a({type:X,payload:s}),n=e.data.posts,c=3,r=s,a(q(t!==[]?[].concat(Object(B.a)(t),Object(B.a)(n.slice((r-1)*c,r*c))):Object(B.a)(n.slice((r-1)*c,r*c)))),a(function(e){return{type:V,payload:e}}(e.data.posts))})).finally((function(){return a(K(!1))}))}),[c]),Object(n.useEffect)((function(){return document.addEventListener("scroll",o),function(){document.removeEventListener("scroll",o)}}),[]);var o=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&a(K(!0))};return Object(l.jsx)("div",{className:"users-posts",children:t.map((function(e){return Object(l.jsx)("div",{className:"post",children:Object(l.jsx)(ne,{comments:e.comments,userName:e.postedBy.username,altName:e.postedBy.username,photoUser:e.postedBy.userimg,description:e.descr,likes:e.likes,id:e._id,src:e.src,alt:e.alt})},e._id)}))})},re=function(e){Object(m.d)((function(e){return{usersData:e.type.usersData}})).usersData;var t=Object(m.d)((function(e){return{allUsersData:e.allUsers.allUsersData}})).allUsersData;return console.log(t),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(A,{}),Object(l.jsxs)("div",{className:"container tape",children:[Object(l.jsx)(ce,{}),Object(l.jsx)(z,{allUsersData:t})]}),Object(l.jsx)(G,{})]})},ae="ADD_USER_SUCCESS",oe="ADD_USER_FAILURE",ie="IS_USER_LOADING",le=function(e){return{type:ae,payload:e}},de=function(e){return{type:oe,payload:{error:e}}},je=function(e){return{type:ie,payload:e}},ue=function(){return function(e){e(je(!0)),fetch("/api/users/allusers").then((function(e){if(e.ok)return e.json();throw new Error("Failed to load")})).then((function(t){console.log(t),e(je(!1)),e(le(t))})).catch((function(t){e(de(t.message))}))}},be=function(e){var t=Object(m.d)((function(e){return e.loggedUser})),s=e.onClick,n=e.prevIndexEl,c=e.comments,r=e.setChangeModal,a=e.setCommentsModal,o=e.likesArr,i=e.setLikesArr,d=e.user,j=e.nextImgEl,u=e.openPost,b=u.descr,h=u.src,p=u._id,O={background:"url(".concat(h,") center center / cover")},g=function(){fetch("/api/post/like",{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:p})}).then((function(e){e.json(),o.includes(t._id)?i(Object(B.a)(o.filter((function(e){return e!==t._id})))):i([].concat(Object(B.a)(o),[t._id])),r(!0)})).then((function(){return r(!1)})).catch((function(e){return console.log(e)}))};return Object(l.jsxs)("div",{className:"modalP",onClick:s,children:[Object(l.jsx)(W,{className:"CloseButton",backgroundColor:"none",text:"X",onClick:s}),Object(l.jsxs)("div",{className:"modalP__wrapper",onClick:function(e){e.stopPropagation()},children:[Object(l.jsx)(W,{className:"buttonModal buttonModal--SliderPrev",backgroundColor:"transparent",text:Object(l.jsx)(Q.a,{src:"/img/Modal/sl-arrow_l.svg"}),onClick:n}),Object(l.jsxs)("div",{className:"modalP__content containerI",children:[Object(l.jsx)("div",{className:"modalImg",style:O,onDoubleClick:g,children:" "}),Object(l.jsxs)("div",{className:"modalText",children:[Object(l.jsxs)("div",{className:"modalText__user",children:[d,Object(l.jsx)("div",{className:"modalText__descr",children:b})]}),Object(l.jsxs)("div",{className:"modalText__text",children:[Object(l.jsx)("div",{className:"modalText__wrapper",style:O,onDoubleClick:g,children:" "}),Object(l.jsx)("div",{className:"modalText__block",children:Object(l.jsx)(se,{setChangeModal:r,comments:c,setComments:a,postID:p})})]}),Object(l.jsxs)("div",{className:"icons",children:[Object(l.jsxs)("div",{className:"svgContainer",children:[o.includes(t._id)?Object(l.jsx)(Q.a,{onClick:g,src:"/img/Posts/iconmonstr-favorite-3.svg",style:{padding:"8px",zIndex:1}}):Object(l.jsx)(Q.a,{onClick:g,src:"/img/Posts/iconmonstr-heart-thin.svg",style:{padding:"8px",zIndex:1}}),Object(l.jsx)("strong",{children:"Likes"}),": ",o.length]}),Object(l.jsx)(Q.a,{src:"/img/Posts/bookmark-white.svg",style:{padding:"8px"}})]})]})]})," ",Object(l.jsx)(W,{className:"buttonModal buttonModal--SliderNext",backgroundColor:"transparent",text:Object(l.jsx)(Q.a,{src:"/img/Modal/sl-arrow_r.svg"}),onClick:j})]})]})},me=function(){return Object(l.jsx)("div",{className:"loader-wrapper",children:Object(l.jsxs)("div",{className:"lds-roller",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{})]})})},he=function(e){var t=Object(o.f)(),s=Object(o.g)().username,c=Object(m.d)((function(e){return e.loggedUser})),r=Object(n.useState)(!1),a=Object(b.a)(r,2),i=a[0],d=a[1],j=Object(n.useState)(!1),u=Object(b.a)(j,2),h=u[0],p=u[1],O=Object(n.useState)(null),g=Object(b.a)(O,2),x=g[0],f=g[1],v=Object(n.useState)(0),N=Object(b.a)(v,2),y=N[0],_=N[1],w=Object(n.useState)(null),C=Object(b.a)(w,2),S=C[0],k=C[1],U=Object(n.useState)(null),E=Object(b.a)(U,2),D=E[0],L=E[1],T=Object(n.useState)(null),I=Object(b.a)(T,2),P=I[0],F=I[1],R=Object(n.useState)(null),B=Object(b.a)(R,2),z=B[0],J=B[1],X=0;Object(n.useEffect)((function(){fetch("/api/users/user/".concat(s),{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){e.user?f(e.user):t.push("/"),!0===P&&f(e.user)})).catch((function(e){return console.log(e)}))}),[h,P]);var H=function(){fetch("/api/users/user/".concat(s,"/follow"),{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){e.error||p((function(e){return!e}))})).catch((function(e){return console.log(e)}))},V=function(){(y>0?x.posts.slice(0,y):x.posts).map((function(e){k(e),L(e.comments),J(e.likes)}))};return x?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(A,{username:c.username}),i&&Object(l.jsx)(be,{onClick:function(){d(!1)},prevIndexEl:function(){_(y?y-1:x.posts.length-1),V()},nextImgEl:function(){_(y<=x.posts.length-1?y+1:x.posts.length-1),V()},openPost:S,comments:D,setCommentsModal:L,setChangeModal:F,likesArr:z,setLikesArr:J,user:Object(l.jsx)(M,{photoUser:x.userimg,alt:"man",userName:x.username})}),Object(l.jsxs)("div",{className:"container profile",children:[Object(l.jsx)("h3",{children:s}),Object(l.jsxs)("div",{className:"user-data",children:[Object(l.jsx)("div",{children:Object(l.jsx)("img",{src:x.userimg,className:"min"})}),Object(l.jsx)("h5",{children:x.name}),Object(l.jsxs)("div",{className:"user-activity",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("strong",{children:"posts:"})," ",x.posts.length]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("strong",{children:"followers:"})," ",x.followers.length]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("strong",{children:"following:"})," ",x.following.length]})]}),x._id!==c._id?x.followers.find((function(e){return e===c._id}))?Object(l.jsx)("div",{onClick:H,className:"btn grey",style:{width:"50%",borderRadius:"0.3rem"},children:Object(l.jsx)("strong",{className:"white-text",children:"Unfollow"})}):Object(l.jsx)("div",{onClick:H,className:"btn pink",style:{width:"50%",borderRadius:"0.3rem"},children:Object(l.jsx)("strong",{className:"white-text",children:"Follow"})}):Object(l.jsx)("div",{})]})]}),Object(l.jsx)("div",{className:"container posts",children:x.posts.map((function(e){return Object(l.jsx)("img",{src:e.src,alt:"posts",onClick:function(){return function(e){if(d(!0),x){var t=x.posts.filter((function(t,s,n){return n[s].src===e})),s=Object(b.a)(t,1),n=Object.assign({},s[0]);k(n),L(n.comments),J(n.likes)}}(e.src)},className:"profile-posts"},++X)}))}),Object(l.jsx)(G,{})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(A,{username:c.username}),Object(l.jsx)(me,{}),Object(l.jsx)(G,{})]})},pe=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return{isLoading:e.type.isLoading,error:e.type.error}})),s=t.isLoading,c=(t.error,Object(m.d)((function(e){return e.isLogged})));Object(m.d)((function(e){return{isUserLoading:e.allUsers.isUserLoading}})).isUserLoading;return Object(n.useEffect)((function(){fetch("/api/post/",{method:"post",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(t){t.isLogged&&(e(P(t.user)),e(T())),t.error&&(e(F()),e(I()))})).catch((function(e){return console.log(e)})),e(_()),e(ue())}),[]),Object(l.jsxs)(o.c,{children:[s?Object(l.jsx)(me,{}):Object(l.jsx)(o.a,{exact:!0,path:"/",component:c?re:d}),c&&Object(l.jsx)(o.a,{exact:!0,path:"/user/:username",component:he}),Object(l.jsx)(o.a,{exact:!0,path:"/register",component:S}),Object(l.jsx)(o.a,{exact:!0,path:"/login",component:R})]})},Oe=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(pe,{})})},ge=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,84)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;s(e),n(e),c(e),r(e),a(e)}))},xe=s(17),fe=s(44);s(82);var ve={};var Ne={usersData:{posts:[]},error:null,isLoading:!1},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(u.a)(Object(u.a)({},e),{},{error:null,usersData:Object(u.a)({},t.payload)});case x:return Object(u.a)(Object(u.a)({},e),{},{usersData:t.payload.error});case f:return Object(u.a)(Object(u.a)({},e),{},{isLoading:t.payload});default:return e}},_e={allUsersData:{users:[]},error:null,isUserLoading:!1},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(u.a)(Object(u.a)({},e),{},{error:null,allUsersData:Object(u.a)({},t.payload)});case oe:return Object(u.a)(Object(u.a)({},e),{},{allUsersData:t.payload.error});case ie:return Object(u.a)(Object(u.a)({},e),{},{isUserLoading:t.payload});default:return e}},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return!0;case U:return!1;default:return e}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return t.payload;case D:return null;default:return e}},ke={photos:[],currentPage:1,fetching:!0,totalCount:0},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return!e;default:return e}},Ee=Object(xe.b)({isLogged:Ce,loggedUser:Se,errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.payload;default:return e}},allUsers:we,type:ye,dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(u.a)(Object(u.a)({},e),{},{photos:Object(B.a)(t.payload)});case X:return Object(u.a)(Object(u.a)({},e),{},{currentPage:t.payload+1});case V:return Object(u.a)(Object(u.a)({},e),{},{totalCount:t.payload});case H:return Object(u.a)(Object(u.a)({},e),{},{fetching:t.payload});default:return e}},isUpdate:Ue}),De=[fe.a],Le=Object(xe.d)(Ee,{},Object(xe.c)(xe.a.apply(void 0,De),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));a.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(m.a,{store:Le,children:Object(l.jsx)(i.a,{children:Object(l.jsx)(Oe,{})})})}),document.getElementById("root")),ge()}},[[83,1,2]]]);
//# sourceMappingURL=main.33daa296.chunk.js.map